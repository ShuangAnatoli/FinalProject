<%- include('partials/header') %>
<%- include('partials/sidenav') %>

<main class="mt-5 pt-3">
    <!-- head section -->
    <div>
        <div class="d-flex mt-3 ms-3">
            <div class="flex-shrink-0">
                <img src="https://i.pinimg.com/564x/20/0d/72/200d72a18492cf3d7adac8a914ef3520.jpg" alt="" width="70px" height="70px">
            </div>
            <div class="flex-grow-1 ms-3">
                <p>Username: <%=post.userDisplay%></p>
                <%var i=post.comments.length;%>
                <span><%=i%> Comments</span>
            </div>
          </div>
    </div>
    <!-- content section -->
    <div class="mt-3 ms-3">
        <p><strong><%=post.title%></strong></p>
        <p> <%=post.content%></p>
    </div>
    <!-- like and comment -->
    <!-- report -->
   <!-- Button trigger modal -->
 <button type="button" class="btn btn-outline-info ms-3" data-bs-toggle="modal" data-bs-target="#exampleModal">Report</button>


    <!-- <a href="/addReport/?id=<%=post.id%>"><button type="button" class="btn btn-outline-info ms-3" >Report</button></a> -->
  
    <!-- comment -->
    <div class="mt-3 ms-3">
        <h4>Comments</h4>
        <%post.comments.forEach(function(comment){%>
        <div class="d-flex mt-3">
            <div class="flex-shrink-0">
                <img src="https://i.pinimg.com/564x/20/0d/72/200d72a18492cf3d7adac8a914ef3520.jpg" alt="" width="50px" height="50px">
            </div>
            <div class="flex-grow-1 ms-3">
                <p><strong><%=comment.cmtUserName%></strong></p>
                <span><%=comment.comment %></span>
            </div>
          </div>
       <% });%>
    </div>

    <!-- add comment -->
    <div class="mt-3 me-5 ms-3">
        <h4>Write a comment</h4>
        <form class="row g-3" action="/addComment" method="post">
            <input type="hidden" name="postId" value="<%=post.id%>">
           
            <div class="col-12">
              <label for="comment" class="form-label">Comment</label>
              <textarea class="form-control" id="comment" rows="5" name="comment"></textarea>
            </div>
            <div class="col-12">
              <button type="submit" class="btn btn-primary">Submit</button>
            </div>
          </form>
    </div>
    
</main>
<!-- Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <form action="/addReport" method="post">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Modal title</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <input type="hidden" name="postId" value="<%=post.id%>">
          <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label">Reason for Report</label>
            <input type="text" class="form-control" name="report" id="exampleFormControlInput1" autocomplete="off" required>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
          <button type="submit" class="btn btn-warning">Report</button>
        </div>
      </form>
  
    </div>
  </div>
</div>
<%- include('partials/footer') %>

